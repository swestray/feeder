<!-- index.html -->
<!doctype html>

<!-- ASSIGN OUR ANGULAR MODULE -->
<html ng-app="Feeder" lang='en'>
<head>
    <!-- META -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1"><!-- Optimize mobile viewport -->

    <title>FEEDER</title>

    <link rel="stylesheet" href="//netdna.bootstrapcdn.com/bootstrap/3.0.0/css/bootstrap.min.css"><!-- load bootstrap -->

    <script src="//ajax.googleapis.com/ajax/libs/angularjs/1.0.8/angular.min.js"></script><!-- load angular -->
    <script src="core.js"></script>

</head>
<!-- SET THE CONTROLLER AND GET ALL RECIPES -->
<body ng-controller="recipeController">
    <div class="container">

        <!-- TODO LIST -->
        <div id="recipe-feed" class="row">
            <!-- LOOP OVER THE RECIPES IN $scope.recipes -->
            <div ng-repeat="recipe in recipes">
                <div style="background-color:#9b350d; border-color: #9b350d" class="well">
                    <div class="row">
                        <!--COLLAPSE BUTTON-->
                        <div class="col-xs-1" ng-controller="CollapseController">
                          <button href="#{{recipe._id}}" ng-click='collapse()' class="btn btn-info" data-toggle="collapse" ng-init="collapseBtn = 'glyphicon glyphicon-chevron-down'">
                            <i style="font-size:2.5em; color:#ffd171" class='{{collapseBtn}}'></i>
                          </button>
                        </div>
                        <!--TITLE and DESCRIPTION-->
                        <div class="text-center col-xs-10">
                          <h1 style="color:#ffd171"><strong>{{recipe.title | uppercase}}</strong></h1>
                          <h4 style="color:#ffd171">{{recipe.description}}</h4>
                        </div>
                        <!--YUM AND YUCK BUTTONS-->
                        <div class="col-xs-1" ng-controller='YumController'>
                          <button class='btn btn-warning pull-right' ng-click='yum(recipe)' ng-init="yumButton='yum';">
                            {{yumButton}}
                          </button>
                          <h3 class="" style="color:#ffd171">{{recipe.score}}</h3>
                          <button class='btn btn-warning pull-right' ng-click='yuck(recipe)' ng-init="yuckButton='yuck';">
                            {{yuckButton}}
                          </button>
                        </div>                  
                    </div>
                    <!--COLLAPSE-->
                    <div id="{{recipe._id}}" class="collapse">
                        <!--TABS-->
                        <section class="tab" ng-controller="TabController">
                            <ul style='display:inline-block; background-color: #cb2e01; color: #ffd171' class="nav nav-pills">
                              <li ng-class="{ active: isSet(1) }">
                                <a href ng-click="setTab(1)">Ingredients</a></li>
                              <li ng-class="{ active: isSet(2) }">
                                <a href ng-click="setTab(2)">Directions</a></li>
                              <li ng-class="{ active: isSet(3) }">
                                <a href ng-click="setTab(3)">Reviews</a></li>
                            </ul>

                            <!--REVIEW TAB-->
                            <div ng-show="isSet(3)">
                              <!--REVIEWS-->
                              <div ng-repeat="review in recipe.reviews">
                                <div style ='background-color:#ffd171; border-color: #ffd171; color:#9b350d' class="well-sm row text-center">
                                    <h3>{{review}}</h3>
                                </div>
                              </div><!--ng-repeat end-->

                              <!--REVIEW FORM-->
                              <form name='reviewForm'>
                                <!--  Live Preview -->
                                <div style ='background-color:#cb2e01; border-color: #cb2e01; color:#ffd171;' class="well-sm row text-center">
                                  <h3>{{review}}</h3>
                                </div>
                                <div style ='background-color:#ffd171; border-color: #ffd171; color:#9b350d' class="well-sm row text-center">
                                  <textarea ng-model='review'></textarea>
                                </div>
                                <!--ADD REVIEW-->
                                <div class="row text-center">
                                  <button id="addBtn" style='background-color:#cb2e01' ng-click='addReview()' class="btn">
                                    <i style="font-size:3.5em; color:#ffd171" class='glyphicon glyphicon-plus'></i>
                                  </button>
                                </div>
                              </form>
                            </div>

                    </div>
                </div>
            </div>
        </div>

        <!-- FORM TO CREATE RECIPES -->
        <div id="recipe-form" class="row">
            <form>
                <div class="form-group">
                    <!-- BIND THIS VALUE TO formData.text IN ANGULAR -->
                    <input type="text" class="form-control input-lg text-center" placeholder="Title of Dish" ng-model="formData.title">
                    <input type="text" class="form-control input-lg text-center" placeholder="Description" ng-model="formData.description">
                </div>

                <!-- createToDo() WILL CREATE NEW TODOS -->
                <button type="submit" class="btn btn-primary btn-lg" ng-click="createRecipe()">Add</button>
            </form>
        </div>

    </div>

    <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
    <!-- Include all compiled plugins (below), or include individual files as needed -->
    <script src="//netdna.bootstrapcdn.com/bootstrap/3.0.0/js/bootstrap.min.js"></script>

</body>
</html>
